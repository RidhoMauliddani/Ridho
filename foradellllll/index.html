<!doctype html>
<html lang="id">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Untukmu</title>
<script src="https://cdn.tailwindcss.com"></script>
<style>
  body { background: linear-gradient(180deg,#ffeaf2,#fff7fb); -webkit-font-smoothing: antialiased; opacity:0; animation:fadeIn .8s forwards; }
  @keyframes fadeIn { to { opacity:1; } }
  .glass { background: rgba(255,255,255,0.75); backdrop-filter: blur(6px); }
  .hidden { display:none; }
  .page { transition: opacity 0.5s ease-in-out; }
  .typewriter { white-space: pre-line; }
  .heart-float { position:fixed; pointer-events:none; z-index:60; font-size:18px; animation:floatUp 3.8s linear forwards; opacity:0.95; }
  @keyframes floatUp { 0%{transform:translateY(0) scale(.9);opacity:1} 100%{transform:translateY(-160px) scale(1.4);opacity:0} }
  /* Slideshow */
  .slides { display:flex; transition: transform 0.5s ease-in-out; }
  .dot { width: 10px; height: 10px; border-radius:50%; margin:0 3px; cursor:pointer; opacity:0.6; background-color:#f9a8d4; }
  .dot.active { background-color:#ec4899; opacity:1; }
</style>
</head>
<body class="min-h-screen p-6">

<!-- Persistent Music -->
<audio id="bgm" loop>
  <source src="music/bergemasampaiselamanya (online-audio-converter.com).ogg" type="audio/ogg">
</audio>

<!-- Navbar -->
<nav class="fixed top-4 left-0 right-0 flex justify-center z-40">
  <div class="bg-white/60 glass rounded-full px-4 py-2 shadow-md flex gap-6">
    <button data-page="home" class="text-pink-600 font-semibold hover:text-pink-700">Beranda</button>
    <button data-page="gallery" class="text-pink-600 font-semibold hover:text-pink-700">Galeri</button>
    <button data-page="letter" class="text-pink-600 font-semibold hover:text-pink-700">Pesan</button>
  </div>
</nav>
<div class="h-16"></div>

<!-- Pages -->
<main class="max-w-xl w-full mx-auto">

  <!-- Beranda -->
  <div id="home" class="page glass rounded-2xl p-8 text-center opacity-100 z-10">
    <h1 class="text-4xl font-extrabold text-pink-700 mb-4">Hai Adelllll Cantikâ€¦</h1>
    <p class="text-pink-900 mb-6">Ada sesuatu yang ingin aku sampaikan. Aku membuatnya khusus untukmu.</p>

    <div class="flex flex-col sm:flex-row gap-3 justify-center mb-6">
      <button data-page="letter" class="px-6 py-3 bg-pink-500 text-white rounded-xl shadow hover:bg-pink-600">Buka Pesannya ðŸ’Œ</button>
      <button data-page="gallery" class="px-6 py-3 border border-pink-300 rounded-xl text-pink-700 hover:bg-pink-50">Lihat Album Foto</button>
    </div>

    <div class="mt-4 flex flex-col sm:flex-row items-center justify-center gap-3">
      <button id="toggleMusicBtn" class="px-4 py-2 rounded-md bg-pink-100">Putar Musik</button>
      <button id="spawnHeartHome" class="px-4 py-2 rounded-md bg-pink-200">Tampilkan Heart</button>
    </div>

    <p class="mt-6 text-sm text-gray-500">Tip: gunakan tombol musik untuk menghentikan / melanjutkan musik latar.</p>
  </div>

  <!-- Galeri -->
  <div id="gallery" class="page hidden max-w-4xl mx-auto opacity-0 z-0">
    <h1 class="text-3xl text-pink-700 font-bold text-center">Album Foto Kita</h1>
    <div class="relative mt-6 overflow-hidden rounded-xl shadow-lg bg-white p-4">
      <div id="slides" class="slides">
        <img class="slide w-full max-h-96 object-cover rounded-lg" src="foto/fotokita.jpeg" alt="">
        <img class="slide w-full max-h-96 object-cover rounded-lg" src="foto/fotokita2.jpeg" alt="">
        <img class="slide w-full max-h-96 object-cover rounded-lg" src="foto/fotokita3.jpeg" alt="">
        <img class="slide w-full max-h-96 object-cover rounded-lg" src="foto/fotoadel.jpeg" alt="">
        <img class="slide w-full max-h-96 object-cover rounded-lg" src="foto/fotokita4.jpeg" alt="">
        <img class="slide w-full max-h-96 object-cover rounded-lg" src="foto/fotokita5.jpeg" alt="">
        <img class="slide w-full max-h-96 object-cover rounded-lg" src="foto/fotokita6.jpeg" alt="">
        <img class="slide w-full max-h-96 object-cover rounded-lg" src="foto/fotoadel.jpeg" alt="">
        <img class="slide w-full max-h-96 object-cover rounded-lg" src="foto/fotokita7.jpeg" alt="">
        <img class="slide w-full max-h-96 object-cover rounded-lg" src="foto/fotokita8.jpeg" alt="">
        <img class="slide w-full max-h-96 object-cover rounded-lg" src="foto/fotokita9.jpeg" alt="">
        <img class="slide w-full max-h-96 object-cover rounded-lg" src="foto/fotokita10.jpeg" alt="">
      </div>
      <button id="prev" class="absolute left-4 top-1/2 -translate-y-1/2 bg-white/80 rounded-full p-2 shadow">â€¹</button>
      <button id="next" class="absolute right-4 top-1/2 -translate-y-1/2 bg-white/80 rounded-full p-2 shadow">â€º</button>
      <div class="mt-3 text-center">
        <div id="dots" class="inline-flex items-center"></div>
      </div>
    </div>
  </div>

  <!-- Surat -->
  <div id="letter" class="page hidden glass rounded-2xl p-8 shadow-lg opacity-0 z-0">
    <header class="flex items-center gap-4 mb-4">
      <div class="w-12 h-12 rounded-full bg-pink-100 flex items-center justify-center text-2xl">ðŸ’—</div>
      <div>
        <h1 class="text-2xl font-bold text-pink-700">Untukmu</h1>
        <p class="text-sm text-gray-600">Sebuah pesan dari Ridho</p>
      </div>
    </header>

    <div class="typewriter text-gray-800 text-lg leading-relaxed mb-6" id="intro">
      Klik "Buka Surat" untuk membaca pesan yang aku tulis pelan.
    </div>

    <div class="flex gap-3">
      <button id="openLetter" class="px-4 py-2 bg-pink-600 text-white rounded-lg">Buka Surat</button>
      <button id="spawnHeart" class="px-4 py-2 bg-pink-100 rounded-lg">Tampilkan Heart</button>
      <button id="toggleMusicLetter" class="px-4 py-2 bg-white border rounded-lg">Jeda / Putar Musik</button>
    </div>

    <div id="letterContent" class="typewriter text-gray-800 mt-4 hidden"></div>
  </div>

</main>

<script>
// === SPA Page Navigation dengan fade ===
const pages = document.querySelectorAll('.page');
function showPage(id){
  const current = document.querySelector('.page:not(.hidden)');
  const next = document.getElementById(id);
  if(current === next) return;

  // fade out current
  current.classList.add('opacity-0');
  current.classList.add('pointer-events-none');

  setTimeout(() => {
    current.classList.add('hidden');
    current.classList.remove('opacity-0');

    // fade in next
    next.classList.remove('hidden');
    next.classList.add('opacity-0');
    next.classList.remove('pointer-events-none');
    setTimeout(() => next.classList.remove('opacity-0'), 50);
  }, 500); // durasi sama dengan Tailwind transition
}

document.querySelectorAll('[data-page]').forEach(btn=> btn.addEventListener('click', ()=> showPage(btn.dataset.page)));

// === Persistent Music ===
const audio = document.getElementById('bgm');
document.addEventListener('click', ()=> audio.play().catch(()=>{}), {once:true});
document.getElementById('toggleMusicBtn').addEventListener('click', ()=> audio.paused ? audio.play() : audio.pause());
document.getElementById('toggleMusicLetter').addEventListener('click', ()=> audio.paused ? audio.play() : audio.pause());

// === Heart Effects ===
function spawnHearts(n=12){
  for(let i=0;i<n;i++){
    const h=document.createElement('div'); h.className='heart-float';
    h.style.left=(10+Math.random()*80)+'vw';
    h.innerHTML=['ðŸ’—','ðŸ’ž','ðŸŒ¸'][Math.floor(Math.random()*3)];
    document.body.appendChild(h); setTimeout(()=>h.remove(),4200);
  }
}
document.getElementById('spawnHeartHome').addEventListener('click', ()=> spawnHearts());
document.getElementById('spawnHeart').addEventListener('click', ()=> spawnHearts());

// === Letter Typewriter ===
const longText = `Hai Adillah Suroyyah Fuadi,

Ini bukan pesan yang dibuat tergesa-gesa...
Sejak aku mulai mengenalmu, ada banyak hal kecil yang membuat hariku berbeda. Mungkin sekarang hari-hariku
mulai kembali berwarna setelah aku mengenalmu, sebenarnya ini bukan hal yang direncanakan, tapi punya rasa
ke kamu merupakan hal yang paling aku suka banget ditahun ini, setelah melewati masa yang cukup bikin frustrasi akhirnya
aku menemukan seseorang sepertimu. Aku tidak ingin terburu-buru. Aku ingin pelan, jujur, dan tulus. tapi aku ingin selalu
terus bersamamu, semoga kita bisa terus selamanya dan semoga bukan hanya semoga, semuanya mendukung apa yang kita impikan

â€” Ridho
`;
async function typeInto(el, text, speed=18){
  el.textContent=''; for(let i=0;i<text.length;i++){ el.textContent += text[i]; await new Promise(r=>setTimeout(r,speed)); }
}
document.getElementById('openLetter').addEventListener('click', async ()=>{
  const letterDiv = document.getElementById('letterContent');
  letterDiv.classList.remove('hidden');
  await typeInto(letterDiv, longText, 18);
  spawnHearts(20);
});

// === Slideshow Galeri ===
const slidesEl = document.getElementById('slides');
const slides = Array.from(slidesEl.querySelectorAll('img'));
let idx = 0;

function showSlide(i){
  idx = (i + slides.length) % slides.length;
  const w = slides[0].clientWidth;
  slidesEl.style.transform = `translateX(${-idx * w}px)`;
  updateDots();
}

// prev/next
document.getElementById('prev').addEventListener('click', ()=> showSlide(idx-1));
document.getElementById('next').addEventListener('click', ()=> showSlide(idx+1));

// dots
const dotsEl = document.getElementById('dots');
slides.forEach((_, i)=>{
  const d = document.createElement('span');
  d.className = 'dot';
  d.addEventListener('click', ()=> showSlide(i));
  dotsEl.appendChild(d);
});
function updateDots(){
  Array.from(dotsEl.children).forEach((d,i)=> d.classList.toggle('active', i===idx));
}

// auto resize / load
window.addEventListener('resize', ()=> showSlide(idx));
window.addEventListener('load', ()=> showSlide(0));

// optional: swipe for mobile
let startX = null;
slidesEl.addEventListener('touchstart', e => startX = e.touches[0].clientX);
slidesEl.addEventListener('touchend', e => {
  if(startX===null) return;
  const dx = e.changedTouches[0].clientX - startX;
  if(dx > 40) showSlide(idx-1);
  else if(dx < -40) showSlide(idx+1);
  startX=null;
});
</script>
</body>
</html>
